<!DOCTYPE html>
<html lang="hi">
<head>
  
  
  
  
  
  <b:if cond='data:blog.url == data:blog.homepageUrl'>
  <style type='text/css'>
    .homepage-black-cover {
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: #000;
      color: #fff;
      z-index: 99999;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
      font-family: Arial, sans-serif;
      letter-spacing: 2px;
    }
    body {
      overflow: hidden !important;
    }
  </style>
  <div class='homepage-black-cover'>
    loading...
  </div>
</b:if>

  
  
  
  
  
  
  <style>
/* Hide Blogger Navbar (default top-grey bar) */
#navbar, #navbar-iframe, .navbar { 
  display: none !important;
  height: 0 !important;
  opacity: 0 !important;
  visibility: hidden !important;
  pointer-events: none !important;
  position: absolute !important;
  z-index: -1 !important;
}
body { margin-top: 0 !important; }
</style>

  
  
  
  <meta charset="UTF-8" />
  <title>TMDb Movies & Series | Fullscreen Popup | Compact Filters</title>
  <style>
    body { background: #121212; color: #fff; margin: 0; padding: 0; font-family: Arial,sans-serif; }
    .top-header {
      display: flex; align-items: center;
      justify-content: space-between;
      padding: 12px 16px 8px 16px;
      background: #181818;
      border-bottom: 1px solid #222;
      transition: opacity .2s;
    }
    body.popup-active .top-header,
    body.popup-active .filter-bar,
    body.popup-active #tmdb-home,
    body.popup-active #load-more {
      opacity: 0 !important;
      pointer-events: none !important;
      user-select: none !important;
    }
    .logo {
      height: 34px; width: 34px;
      border-radius: 50%; background: #FFD700;
      display: flex; align-items: center; justify-content: center;
      font-weight: bold; font-size: 18px; color: #222;
    }
    .search-bar {
      display: flex; align-items: center;
      flex: 1; margin-left: 10px; min-width: 120px; max-width: 210px;
    }
    .search-bar input {
      width: 100%; padding: 6px 10px; font-size: 13px; border-radius:15px;
      outline: none; border: 1px solid #FFD700; background: #222; color: #FFD700;
    }
    .search-btn {
      margin-left: 6px; padding: 6px 11px; font-size: 13px; border-radius: 15px;
      border: none; background: #FFD700; color: #222; font-weight: bold; cursor: pointer;
    }
    .filter-bar {
      display: flex; gap: 15px; align-items: center;
      padding: 8px 10px 5px 10px; background: #161616;
      justify-content: center;
      transition: opacity .2s;
      min-width:0; max-width:330px; margin:0 auto;
    }
    .filter-bar label { font-size: 13px; color: #FFD700; font-weight:700; margin-right:4px;}
    .filter-bar select {
      background:#222; color:#FFD700; border-radius:7px; border:1px solid #444;
      padding:3px 8px; font-size:13px; font-weight:bold; min-width:77px; max-width:120px; outline:none;
    }
    #tmdb-home {
      display: flex; flex-wrap: wrap; gap:13px; justify-content:center; padding:12px;
      transition: opacity .2s;
    }
    .movie-item { background:#222;border-radius:8px;width:160px;padding:10px;box-sizing:border-box;text-align:center;cursor:pointer;}
    .movie-item:hover { transform:scale(1.05);box-shadow:0 6px 18px #0006;}
    .movie-img { width:100%;border-radius:5px; margin-bottom:8px; object-fit:cover;}
    .movie-title { font-size:14px;font-weight:bold;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}
    .share-btn{background:#FFD700;color:#222;border:none;padding:4px 11px;border-radius:8px;margin-top:7px;font-size:13px;font-weight:bold;cursor:pointer;}
    #load-more{display:block;margin:20px auto 14px auto;padding:8px 19px;font-size:13px;background:#FFD700;color:#121212;border:none;border-radius:5px;transition: opacity .2s;}
    body.popup-active #load-more { opacity: 0 !important;}

    /* POPUP full window */
    #popup-bg {
      display: none; position: fixed; z-index:99999; top:0;left:0;width:100vw;height:100vh;
      background:rgba(0,0,0,0.98); justify-content: center; align-items: center;
    }
    #popup-window {
      position: relative; width:100vw; height:100vh; background:#000; border-radius:0;
      box-shadow:0 0 36px #000a; display:flex; flex-direction:column; overflow:hidden;
      max-width:none; max-height:none;
    }
    #popup-iframe {
      flex-grow:1; border:none; background:#151515; width:100vw; height:100vh; z-index:1;
    }
    #iframe-overlay {
      position:absolute;top:16px;left:16px;z-index:10;display:flex;gap:11px;
    }
    .circle-btn { width:29px;height:29px;background:rgba(255,255,255,0.12);color:#FFD700;border:none; border-radius:50%; font-size:14px;display:flex;align-items:center;justify-content:center;cursor:pointer;}
    .circle-btn:hover { background:rgba(255,215,0,0.27);color:#fff;}
    .popup-menu {
      position: absolute; top:44px;left:12px;
      background:rgba(20,20,20,0.98);color:#fff;border-radius:9px;padding:10px 14px;max-height:175px;min-width:110px;overflow-y:auto;display:none;z-index:30; box-shadow:0 6px 24px #0005;}
    .popup-menu h4{margin:2px 0 8px 0;font-size:11px;font-weight:700;color:#ffd700;}
    .popup-menu button{display:block;width:100%;background:#222;color:#FFD700;border:none;padding:6px;margin:3px 0;text-align:left;border-radius:5px;cursor:pointer;font-size:12px;font-weight:600;}
    .popup-menu button.active{background:#FFD700;color:#222;}
    .popup-menu div{margin-bottom:6px;}
    .popup-menu{overflow-y:auto;max-height:31vh;}
    @media(max-width:700px){
      .top-header{padding:8px 3px 6px 8px;}
      .filter-bar{gap:7px;padding:6px 3px 4px 3px;max-width:210px;}
      .movie-item{width:107px;padding:6px;}
      .circle-btn{width:22px;height:22px;font-size:11px;}
      .search-bar{max-width:110px;}
    }
  </style>
</head>
<body>
<div class="top-header">
  <div class="logo">🎬</div>
  <div class="search-bar">
    <input type="search" id="searchInput" placeholder="Search movies, series..." />
    <button class="search-btn" id="searchBtn">Search</button>
  </div>
</div>
<div class="filter-bar">
  <label for="movieFilter">Movies Genre:</label>
  <select id="movieFilter"></select>
  <label for="seriesFilter">Series Genre:</label>
  <select id="seriesFilter"></select>
</div>
<div id="tmdb-home"></div>
<button id="load-more">Load More</button>
<div id="popup-bg" role="dialog" aria-modal="true">
  <div id="popup-window">
    <iframe id="popup-iframe" allowfullscreen></iframe>
    <div id="iframe-overlay"></div>
    <div id="server-menu" class="popup-menu"></div>
    <div id="series-menu" class="popup-menu"></div>
  </div>
</div>
<script>
const accessToken = 'eyJhbGciOiJIUzI1NiJ9.eyJhdWQiOiI0OTNkMTM4MTU2Njk3ZmZlYjBlMDJiYzQ5MmY1MTM2ZiIsIm5iZiI6MTc1Mjg5OTIwNS44NDYwMDAyLCJzdWIiOiI2ODdiMWU4NTczMGFiNTcyYjY4YTQyMTMiLCJzY29wZXMiOlsiYXBpX3JlYWQiXSwidmVyc2lvbiI6MX0.FRl9XQDHbm63BIxT0foo1miJTGOGkOY6avjSecfttHE';
const availableSources=[
  {id:'autoembed',name:'premium',urls:{movie:'https://player.vidplus.to/embed/movie/{id}',tv:'https://player.vidplus.to/embed/tv/{id}/{season}/{episode}'}},
  {id:'pstream',name:'P-Stream',urls:{movie:'https://vidrock.net/movie/{id}',tv:'https://vidrock.net/tv/{id}/{season}/{episode}'}},
  {id:'multiembed',name:'MultiEmbed',urls:{movie:'https://multiembed.mov/?video_id={id}&tmdb=1',tv:'https://multiembed.mov/?video_id={id}&tmdb=1&s={season}&e={episode}'}},
  {id:"moviesapi",name:"MoviesAPI",urls:{movie:'https://moviesapi.club/movie/{id}',tv:'https://moviesapi.club/tv/{id}-{season}-{episode}'}},
  {id:"embedsu",name:"EmbedSU",urls:{movie:"https://embed.su/embed/movie/{id}",tv:"https://embed.su/embed/tv/{id}/{season}/{episode}"}},
  {id:"hexa",name:"Hexa",urls:{movie:"https://hexa.watch/watch/movie/{id}",tv:"https://hexa.watch/watch/tv/{id}/{season}/{episode}"}},
  {id:"vidlink",name:"VidLink",urls:{movie:"https://vidlink.pro/movie/{id}",tv:"https://vidlink.pro/tv/{id}/{season}/{episode}"}},
  {id:"vidsrcXyz",name:"VidSrcXyz",urls:{movie:"https://vidsrc.xyz/embed/movie/{id}",tv:"https://vidsrc.xyz/embed/tv/{id}/{season}/{episode}"}},
  {id:"vidsrcrip",name:"VidSrcRIP",urls:{movie:"https://vidsrc.rip/embed/movie/{id}",tv:"https://vidsrc.rip/embed/tv/{id}/{season}/{episode}"}},
  {id:"vidsrcsu",name:"VidSrcSU",urls:{movie:"https://vidsrc.su/embed/movie/{id}",tv:"https://vidsrc.su/embed/tv/{id}/{season}/{episode}"}},
  {id:"vidsrcvip",name:"VidSrcVIP",urls:{movie:"https://vidsrc.vip/embed/movie/{id}",tv:"https://vidsrc.vip/embed/tv/{id}/{season}/{episode}"}},
  {id:"2embed",name:"2Embed",urls:{movie:"https://www.2embed.cc/embed/{id}",tv:"https://www.2embed.cc/embedtv/{id}&s={season}&e={episode}"}},
  {id:"123embed",name:"123Embed",urls:{movie:"https://play2.123embed.net/movie/{id}",tv:"https://play2.123embed.net/tv/{id}/{season}/{episode}"}},
  {id:"111movies",name:"111Movies",urls:{movie:"https://111movies.com/movie/{id}",tv:"https://111movies.com/tv/{id}/{season}/{episode}"}},
  {id:"smashystream",name:"SmashyStream",urls:{movie:"https://player.smashy.stream/movie/{id}",tv:"https://player.smashy.stream/tv/{id}?s={season}&e={episode}"}},
  {id:"videasy",name:"VidEasy (4K)",urls:{movie:"https://player.videasy.net/movie/{id}?color=8834ec",tv:"https://player.videasy.net/tv/{id}/{season}/{episode}?color=8834ec"}},
  {id:"vidfast",name:"VidFast (4K)",urls:{movie:"https://vidfast.pro/movie/{id}",tv:"https://vidfast.pro/tv/{id}/{season}/{episode}"}},
  {id:"vidify",name:"Vidify",urls:{movie:"https://vidify.top/embed/movie/{id}",tv:"https://vidify.top/embed/tv/{id}/{season}/{episode}"}},
  {id:"flicky",name:"Flicky",urls:{movie:"https://flicky.host/embed/movie/?id={id}",tv:"https://flicky.host/embed/tv/{id}/{season}/{episode}"}},
  {id:"rive",name:"RiveStream",urls:{movie:"https://rivestream.org/embed?type=movie&id={id}",tv:"https://rivestream.org/embed?type=tv&id={id}&season={season}&episode={episode}"}},
  {id:"vidora",name:"Vidora",urls:{movie:"https://vidora.su/movie/{id}",tv:"https://vidora.su/tv/{id}/{season}/{episode}"}},
  {id:"vidsrccc",name:"VidSrcCC",urls:{movie:"https://vidsrc.cc/v2/embed/movie/{id}?autoPlay=false",tv:"https://vidsrc.cc/v2/embed/tv/{id}/{season}/{episode}?autoPlay=false"}},
  {id:"streamflix",name:"StreamFlix",urls:{movie:"https://watch.streamflix.one/movie/{id}/watch?server=1",tv:"https://watch.streamflix.one/tv/{id}/watch?server=1&season={season}&episode={episode}"}},
  {id:"nebula",name:"NebulaFlix",urls:{movie:"https://nebulaflix.stream/movie?mt={id}&server=1",tv:"https://nebulaflix.stream/show?st={id}&season={season}&episode={episode}&server=1"}},
  {id:"vidjoy",name:"VidJoy",urls:{movie:"https://vidjoy.pro/embed/movie/{id}",tv:"https://vidjoy.pro/embed/tv/{id}/{season}/{episode}"}},
  {id:"vidzee",name:"VidZee",urls:{movie:"https://player.vidzee.wtf/embed/movie/{id}",tv:"https://player.vidzee.wtf/embed/tv/{id}/{season}/{episode}"}},
  {id:"spenflix",name:"Spenflix",urls:{movie:"https://spencerdevs.xyz/movie/{id}",tv:"https://spencerdevs.xyz/tv/{id}/{season}/{episode}"}},
  {id:"frembed",name:"Frembed",urls:{movie:"https://frembed.icu/api/film.php?id={id}",tv:"https://frembed.icu/api/serie.php?id={id}&sa={season}&epi={episode}"}},
  {id:"uembed",name:"UEmbed (premium)",urls:{movie:"https://uembed.site/?id={id}&apikey=thisisforsurenotapremiumkey_right?",tv:"https://uembed.site/?id={id}&season={season}&episode={episode}&apikey=thisisforsurenotapremiumkey_right?"}}
];

let currentPage=1, totalPages=1, moviesData=[], searchMode=false, searchType="multi", searchQuery="";
const container=document.getElementById('tmdb-home'), loadMoreBtn=document.getElementById('load-more');
const popupBg=document.getElementById('popup-bg'), popupIframe=document.getElementById('popup-iframe');
const serverMenu=document.getElementById('server-menu'), seriesMenu=document.getElementById('series-menu');
const overlay=document.getElementById('iframe-overlay'), searchInput=document.getElementById('searchInput'), searchBtn=document.getElementById('searchBtn');
const movieFilter=document.getElementById('movieFilter'), seriesFilter=document.getElementById('seriesFilter');
let currentTmdb={type:'movie',id:null,season:1,episode:1,server:0};

// ---- GENRES ----
const movieGenres=[
  {id:"", name:"All"},{id:"28", name:"Action"},{id:"12", name:"Adventure"},{id:"16", name:"Animation"},{id:"35", name:"Comedy"},
  {id:"80", name:"Crime"},{id:"99", name:"Documentary"},{id:"18", name:"Drama"},{id:"10751", name:"Family"},{id:"14", name:"Fantasy"},
  {id:"36", name:"History"},{id:"27", name:"Horror"},{id:"10402", name:"Music"},{id:"9648", name:"Mystery"},{id:"10749", name:"Romance"},
  {id:"878", name:"Sci-Fi"},{id:"10770", name:"TV Movie"},{id:"53", name:"Thriller"},{id:"10752", name:"War"},{id:"37", name:"Western"}
];
const tvGenres=[
  {id:"", name:"All"},{id:"10759", name:"Action & Adventure"},{id:"16", name:"Animation"},{id:"35", name:"Comedy"},{id:"80", name:"Crime"},
  {id:"99", name:"Documentary"},{id:"18", name:"Drama"},{id:"10751", name:"Family"},{id:"10762", name:"Kids"},{id:"9648", name:"Mystery"},
  {id:"10763", name:"News"},{id:"10764", name:"Reality"},{id:"10765", name:"Sci-Fi"},{id:"10766", name:"Soap"},{id:"10767", name:"Talk"},
  {id:"10768", name:"War & Politics"},{id:"37", name:"Western"}
];
movieGenres.forEach(g=>{
  let opt=document.createElement('option'); opt.value=g.id;opt.innerText=g.name;movieFilter.appendChild(opt);
});
tvGenres.forEach(g=>{
  let opt=document.createElement('option');opt.value=g.id;opt.innerText=g.name;seriesFilter.appendChild(opt);
});

// --- API Calls ---
function buildEmbedLink(source, type, id, season=1, episode=1){
  let url=source.urls[type];return url.replace('{id}',id).replace('{season}',season).replace('{episode}',episode);
}
function showMovies(results){
  container.innerHTML='';
  results.forEach(item=>{
    if(!item.poster_path)return;
    const title=item.title||item.name||'अज्ञात शीर्षक';
    const poster=item.poster_path?`https://image.tmdb.org/t/p/w500${item.poster_path}`:'https://via.placeholder.com/500x750?text=No+Image';
    const tmdbType=item.media_type||(item.first_air_date?'tv':'movie'),tmdbId=item.id;
    const movieDiv=document.createElement('div');
    movieDiv.className='movie-item';
    movieDiv.innerHTML=`<img class="movie-img" src="${poster}" alt="${title}">
      <div class="movie-title" title="${title}">${title}</div>
      <button class="share-btn">Share</button>`;
    movieDiv.addEventListener('click',e=>{
      if(!e.target.classList.contains('share-btn'))openPopup(tmdbType,tmdbId);
    });
    movieDiv.querySelector('.share-btn').onclick=e=>{
      e.stopPropagation();
      const popupLink=`${window.location.origin}${window.location.pathname}?tmdb=${tmdbType}_${tmdbId}`;
      navigator.clipboard.writeText(popupLink).then(()=>{
        alert('Popup लिंक कॉपी किया गया:\n'+popupLink); openPopup(tmdbType,tmdbId);
      });
    };
    container.appendChild(movieDiv);
  });
}

async function loadTrending(page){
  searchMode=false;
  const url=`https://api.themoviedb.org/3/trending/all/day?language=hi-IN&page=${page}`;
  const response=await fetch(url,{headers:{Authorization:`Bearer ${accessToken}`,accept:'application/json'}});
  const data=await response.json();
  totalPages=data.total_pages;moviesData=moviesData.concat(data.results||[]);
  showMovies(moviesData);loadMoreBtn.style.display=page<totalPages?'block':'none';
}
async function loadSearch(page){
  const url=`https://api.themoviedb.org/3/search/${searchType}?query=${encodeURIComponent(searchQuery)}&page=${page}&language=hi-IN`;
  const response=await fetch(url,{headers:{Authorization:`Bearer ${accessToken}`,accept:'application/json'}});
  const data=await response.json();
  totalPages=data.total_pages;if(page===1)moviesData=[];
  moviesData=moviesData.concat(data.results||[]);
  showMovies(moviesData);loadMoreBtn.style.display=page<totalPages?'block':'none';
}
async function loadDiscover(type,genre,page){
  let url=`https://api.themoviedb.org/3/discover/${type}?page=${page}&language=hi-IN`;
  if(genre) url+=`&with_genres=${genre}`;
  const response=await fetch(url,{headers:{Authorization:`Bearer ${accessToken}`,accept:'application/json'}});
  const data=await response.json();
  totalPages=data.total_pages;if(page===1)moviesData=[];
  moviesData=moviesData.concat(data.results.map(x=>({...x,media_type:type})));
  showMovies(moviesData);loadMoreBtn.style.display=page<totalPages?'block':'none';
}

// --- Actions ---
searchBtn.onclick=()=>{
  searchQuery=searchInput.value.trim();
  if(!searchQuery)return searchInput.focus();
  searchMode=true;currentPage=1;loadSearch(1);
};
searchInput.onkeydown=e=>{if(e.key==="Enter"){searchBtn.onclick();}}
movieFilter.onchange=()=>{
  let g=movieFilter.value;
  if(g){searchMode=false;currentPage=1;loadDiscover('movie',g,1);}
  else{currentPage=1;moviesData=[];loadTrending(1);}
};
seriesFilter.onchange=()=>{
  let g=seriesFilter.value;
  if(g){searchMode=false;currentPage=1;loadDiscover('tv',g,1);}
  else{currentPage=1;moviesData=[];loadTrending(1);}
};
loadMoreBtn.onclick=()=>{
  if(searchMode) loadSearch(++currentPage);
  else if(movieFilter.value) loadDiscover('movie',movieFilter.value,++currentPage);
  else if(seriesFilter.value) loadDiscover('tv',seriesFilter.value,++currentPage);
  else loadTrending(++currentPage);
};
// --- Popup UI ---
function openPopup(type,id){
  currentTmdb={type,id,season:1,episode:1,server:0};
  popupIframe.src=buildEmbedLink(availableSources[0],type,id,1,1);
  buildOverlayControls(type);buildServerMenu(type,id);buildSeriesMenu(type,id,1,1);
  popupBg.style.display='flex';document.body.classList.add('popup-active');
}
function buildOverlayControls(type){
  overlay.innerHTML='';
  let btnServer=document.createElement('button');
  btnServer.className='circle-btn';btnServer.title='Servers';btnServer.innerHTML='<span>🌐</span>';
  btnServer.onclick=function(){serverMenu.style.display=(serverMenu.style.display==='block')?'none':'block';seriesMenu.style.display='none';};
  overlay.appendChild(btnServer);
  if(type==='tv'){
    let btnSeries=document.createElement('button');
    btnSeries.className='circle-btn';btnSeries.title='Seasons/Episodes';btnSeries.innerHTML='<span>⏯</span>';
    btnSeries.onclick=function(){seriesMenu.style.display=(seriesMenu.style.display==='block')?'none':'block';serverMenu.style.display='none';};
    overlay.appendChild(btnSeries);
  }
}
function buildServerMenu(type,id,season=1,episode=1){
  serverMenu.innerHTML='<h4>सर्वर चुनें</h4>';
  availableSources.forEach((src,idx)=>{
    const btn=document.createElement('button');
    btn.innerText=src.name;
    btn.className=currentTmdb.server===idx?'active':'';
    btn.onclick=()=>{
      popupIframe.src=buildEmbedLink(src,type,id,currentTmdb.season,currentTmdb.episode);
      currentTmdb.server=idx;serverMenu.style.display='none';
    };
    serverMenu.appendChild(btn);
  });
}
function buildSeriesMenu(type,id,season=1,episode=1){
  seriesMenu.innerHTML='';
  if(type==='tv'){
    let totalSeasons=3,totalEpisodes=7,html='<h4>सीजन/एपिसोड चुनें</h4>';
    for(let s=1;s<=totalSeasons;s++){
      html+=`<div>Season ${s}: `;
      for(let e=1;e<=totalEpisodes;e++){
        html+=`<button onclick="selectEpisode(${s},${e})" style="${(currentTmdb.season===s&&currentTmdb.episode===e)?'background:#FFD700;color:#222':''}">E${e}</button>`;
      }
      html+='</div>';
    }
    seriesMenu.innerHTML=html;
  }
}
window.selectEpisode=function(s,e){
  currentTmdb.season=s;currentTmdb.episode=e;
  popupIframe.src=buildEmbedLink(availableSources[currentTmdb.server||0],currentTmdb.type,currentTmdb.id,s,e);
  buildSeriesMenu(currentTmdb.type,currentTmdb.id,s,e);seriesMenu.style.display='none';
};
popupBg.onclick=e=>{if(e.target===popupBg){popupBg.style.display='none';popupIframe.src='';document.body.classList.remove('popup-active');serverMenu.style.display='none';seriesMenu.style.display='none';}};
function autoOpenPopupFromUrl(){
  const params=new URLSearchParams(window.location.search);
  const tmdbRaw=params.get('tmdb');
  if(tmdbRaw){const match=tmdbRaw.match(/(movie|tv)_(\d+)/);if(match)openPopup(match[1],match[2]);}
}
autoOpenPopupFromUrl();
loadTrending(1);
</script>
</body>
</html>
